
const { SlashCommandBuilder } = require('discord.js');

module.exports = {
    data: new SlashCommandBuilder()
        .setName('setSystemMessage')
        .setDescription('Sets the system message which provides context to Hubert')
        .addStringOption(option =>
            option.setName('system message')
            .setRequired(true)),
    async execute(interaction) {
        global.systemMessage = interaction.options.getString('system message');
        
        // This is very unnecessary but fun
        let sendToAi = [
            {role: "system", content: global.systemMessage}
        ];
        sendToAi.splice(1, 0, {role: "user" , content: 'Tell me about yourself in 100 words or less'});

        const completion = await openai.createChatCompletion({
			model: "gpt-3.5-turbo",
			messages: sendToAi,
			max_tokens: 400,
			temperature: 1.2,
			user: message.author.id,
		});

        await interaction.reply(completion.data.choices[0].message.content);
    },
};
